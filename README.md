# Inception Project

## Introduction
The Inception project is designed to introduce the concept of containerized infrastructure. The goal is to create a small, efficient setup of Docker containers using Docker Compose, adhering to specific rules and best practices. Each service runs in its dedicated container, and the entire setup is managed within a virtual machine environment.

## What is Docker?
Docker is a platform that allows developers to package applications and their dependencies into lightweight, portable containers. These containers run consistently across different environments, eliminating the "it works on my machine" problem. Docker simplifies software delivery by isolating applications from their underlying infrastructure.

## What is Docker Compose?
Docker Compose is a tool for defining and managing multi-container Docker applications. Using a `docker-compose.yml` file, you can configure your services, networks, and volumes in a declarative format. Docker Compose simplifies the process of running complex setups by managing multiple containers with a single command.

## Key Concepts

### Docker Image
A Docker image is a lightweight, standalone, and executable package that includes everything needed to run a piece of software. This includes the application code, runtime, libraries, environment variables, and configurations. Docker images are used to create containers.

### Docker Volume
A Docker volume is a mechanism for persisting data generated by and used by Docker containers. Volumes allow you to share data between containers and the host system, ensuring that important data is not lost when containers are removed or recreated.

## Project Structure
The project directory is structured as follows:

```
Desktop/42-Projects/Inception/
├── Makefile
└── srcs
    ├── docker-compose.yml
    ├── .env
    └── requirements
        ├── mariadb
        │   ├── conf
        │   │   └── 50-server.cnf
        │   ├── Dockerfile
        │   └── tools
        │       └── run_mariadb.sh
        ├── nginx
        │   ├── conf
        │   │   └── default.conf
        │   ├── Dockerfile
        │   └── tools
        │       └── run_nginx.sh
        └── wordpress
            ├── Dockerfile
            └── tools
                └── run_wordpress.sh
```

- **Makefile**: Automates the building and running of the Docker Compose setup.
- **docker-compose.yml**: Defines the services, networks, and volumes.
- **.env**: Stores environment variables for configuration.
- **requirements/**: Contains subdirectories for each service (e.g., MariaDB, NGINX, WordPress), along with their respective Dockerfiles and configurations.

## Usage

### Steps
1. Before running Inception on Linux, ensure that you have the necessary dependencies installed. You may need to install the following packages:

   ```bash
   sudo apt-get update
   sudo apt-get install build-essential -y
   sudo apt-get install docker docker-compose -y
   ```
1. Clone the repository:
   ```bash
   git clone https://github.com/jesuismarie/Inception.git
   cd inception
   ```

2. Configure the `.env` file:
   - The `.env` file is located in the `srcs` directory and stores environment variables.
   - Example structure:
     ```
	 USERNAME=<your-login>
     DOMAIN_NAME=<your-login>.42.fr
     CERTS=/etc/nginx/ssl/<your-login>-selfsigned.crt
     KEYOUT=/etc/nginx/ssl/<your-login>-selfsigned.key

     MYSQL_ROOT_PASSWORD=
     MYSQL_USER=<db-username>
     MYSQL_PASSWORD=<db-password>
     WORDPRESS_DB_NAME=<db-name>

     MYSQL_USER=<db-username>
     MYSQL_DATABASE=<db_name>
     MYSQL_PASSWORD=<db-password>
     MYSQL_HOSTNAME=mariadb
     MYSQL_ROOT_PASSWORD=<root-password>

     WORDPRESS_TITLE=Inception
     WORDPRESS_ROOT_USERNAME=<root-username>
     WORDPRESS_ROOT_ROLE=<admin-role>
     WORDPRESS_ROOT_EMAIL=<root-mail>
     WORDPRESS_ROOT_PASSWORD=<root-password>

     WORDPRESS_USER_USERNAME=<user-username>
     WORDPRESS_USER_EMAIL=<user-mail>
     WORDPRESS_USER_ROLE=<user-role>
     WORDPRESS_USER_PASSWORD=<user-password>
     ```

3. Build and start the containers using the Makefile:
   ```bash
   make
   ```

4. Access the infrastructure:
   - Visit `https://<your-login>.42.fr` to view the WordPress site.

### Additional Commands
- Stop containers and clean up all containers:
  ```bash
  make down
  ```
- Sart containers:
  ```bash
  make start
  ```
- Stop containers:
  ```bash
  make stop
  ```
- Clean up all containers, volumes and network:
  ```bash
  make fclean
  ```
- Rebuild the setup:
  ```bash
  make re
  ```

## Project Features

### Mandatory
- **NGINX**: Secure access using TLSv1.2 or TLSv1.3 (port 443).
- **WordPress**: PHP-FPM configured for content management.
- **MariaDB**: Backend database for WordPress.
- **Volumes**: Separate storage for WordPress files and database.
- **Network**: Custom Docker network connecting all containers.